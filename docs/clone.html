---

title: Cloning Around 

keywords: fastai
sidebar: home_sidebar

summary: "Summary"
description: "Summary"
nb_path: "04_clone.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 04_clone.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In older version control systems, checkout is the standard operation to get files. You retrieve a bunch of files in a particular saved state.</p>
<p>In Git and other distributed version control systems, cloning is the standard operation. To get files, you create a 'clone' of the entire repository. In other words, you practically mirror the central server. Anything the main repository can do, you can do.</p>
<h3 id="Sync-Computers">Sync Computers<a class="anchor-link" href="#Sync-Computers"> </a></h3><p>I can tolerate making tarballs or using <em>rsync</em> for backups and basic syncing. But sometimes I edit on my laptop, other times on my desktop, and the two may not have talked to each other in between.</p>
<p>Initialize a Git repository and commit your files on one machine. Then on the other:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git clone other.computer:/path/to/files
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>to create a second copy of the files and Git repository. From now on,</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git commit -a
 <span class="o">!</span> git pull other.computer:/path/to/files HEAD
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>will 'pull' in the state of the files on the other computer into the one you're working on. If you've recently made conflicting edits in the same file, Git will let you know and you should commit again after resolving them.</p>
<h3 id="Classic-Source-Control">Classic Source Control<a class="anchor-link" href="#Classic-Source-Control"> </a></h3><p>Initialize a Git repository for your files:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git init
 <span class="o">!</span> git add .
 <span class="o">!</span> git commit -m <span class="s2">&quot;Initial commit&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On the central server, initialize a 'bare repository' in some directory:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> mkdir proj.git
 <span class="o">!</span> <span class="nb">cd</span> proj.git
 <span class="o">!</span> git --bare init
 <span class="o">!</span> touch proj.git/git-daemon-export-ok
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Start the Git daemon if necessary:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git daemon --detach  # it may already be running
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For Git hosting services, follow the instructions to setup the initially
empty Git repository. Typically one fills in a form on a webpage.</p>
<p>'Push' your project to the central server with:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git push central.server/path/to/proj.git HEAD
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To check out the source, a developer types:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git clone central.server/path/to/proj.git
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After making changes, the developer saves changes locally:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git commit -a
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To update to the latest version:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git pull
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Any merge conflicts should be resolved then committed:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git commit -a
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To check in local changes into the central repository:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git push
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If the main server has new changes due to activity by other developers, the
push fails, and the developer should pull the latest version, resolve any merge conflicts, then try again.</p>
<p>Developers must have SSH access for the above pull and push commands.
However, anyone can see the source by typing:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git clone git://central.server/path/to/proj.git
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The native git protocol is like HTTP: there is no authentication, so anyone can
retrieve the project. Accordingly, by default, pushing is forbidden via the git
protocol.</p>
<h3 id="Secret-Source">Secret Source<a class="anchor-link" href="#Secret-Source"> </a></h3><p>For a closed-source project, omit the touch command, and ensure you never
create a file named <code>git-daemon-export-ok</code>. The repository can no longer be
retrieved via the git protocol; only those with SSH access can see it. If all
your repos are closed, running the git daemon is unnecessary because all
communication occurs via SSH.</p>
<h3 id="Bare-repositories">Bare repositories<a class="anchor-link" href="#Bare-repositories"> </a></h3><p>A bare repository is so named because it has no working directory; it only contains files that are normally hidden away in the <code>.git</code> subdirectory. In other words, it maintains the history of a project, and never holds a snapshot of any given version.</p>
<p>A bare repository plays a role similar to that of the main server in a
centralized version control system: the home of your project. Developers clone
your project from it, and push the latest official changes to it. Typically it
resides on a server that does little else but disseminate data. Development
occurs in the clones, so the home repository can do without a working
directory.</p>
<p>Many Git commands fail on bare repositories unless the <code>GIT_DIR</code> environment variable is set to the repository path, or the <code>--bare</code> option is supplied.</p>
<h3 id="Push-versus-pull">Push versus pull<a class="anchor-link" href="#Push-versus-pull"> </a></h3><p>Why did we introduce the push command, rather than rely on the familiar pull
command? Firstly, pulling fails on bare repositories: instead you must 'fetch',
a command we later discuss. But even if we kept a normal repository on the
central server, pulling into it would still be cumbersome. We would have to
login to the server first, and give the pull command the network address of the
machine we're pulling from. Firewalls may interfere, and what if we have no
shell access to the server in the first place?</p>
<p>However, apart from this case, we discourage pushing into a repository, because confusion can ensue when the destination has a working directory.</p>
<p>In short, while learning Git, only push when the target is a bare repository; otherwise pull.</p>
<h3 id="Forking-a-Project">Forking a Project<a class="anchor-link" href="#Forking-a-Project"> </a></h3><p>Sick of the way a project is being run? Think you could do a better job? Then on your server:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git clone git://main.server/path/to/files
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next, tell everyone about your fork of the project at your server.</p>
<p>At any later time, you can merge in the changes from the original project with:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git pull
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Ultimate-Backups">Ultimate Backups<a class="anchor-link" href="#Ultimate-Backups"> </a></h3><p>Want numerous tamper-proof geographically diverse redundant archives? If your project has many developers, don't do anything! Every clone of your code is effectively a backup. Not just of the current state, but of your project's entire history. Thanks to cryptographic hashing, if anyone's clone becomes corrupted, it will be spotted as soon as they try to communicate with others.</p>
<p>If your project is not so popular, find as many servers as you can to host clones.</p>
<p>The truly paranoid should always write down the latest 20-byte SHA1 hash of the HEAD somewhere safe. It has to be safe, not private. For example, publishing it in a newspaper would work well, because it's hard for an attacker to alter every copy of a newspaper.</p>
<h3 id="Light-Speed-Multitask">Light-Speed Multitask<a class="anchor-link" href="#Light-Speed-Multitask"> </a></h3><p>Say you want to work on several features in parallel. Then commit your project and run:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git clone . /some/new/directory
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Thanks to <a href="http://en.wikipedia.org/wiki/Hard_link[hardlinking">http://en.wikipedia.org/wiki/Hard_link[hardlinking</a>], local clones
require less time and space than a plain backup.</p>
<p>You can now work on two independent features simultaneously. For example, you
can edit one clone while the other is compiling. At any time, you can commit
and pull changes from the other clone:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git pull /the/other/clone HEAD
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Guerilla-Version-Control">Guerilla Version Control<a class="anchor-link" href="#Guerilla-Version-Control"> </a></h3><p>Are you working on a project that uses some other version control system, and you sorely miss Git? Then initialize a Git repository in your working directory:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git init
 <span class="o">!</span> git add .
 <span class="o">!</span> git commit -m <span class="s2">&quot;Initial commit&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>then clone it:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git clone . /some/new/directory
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now go to the new directory and work here instead, using Git to your heart's content. Once in a while, you'll want to sync with everyone else, in which case go to the original directory, sync using the other version control system, and type:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git add .
 <span class="o">!</span> git commit -m <span class="s2">&quot;Sync with everyone else&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then go to the new directory and run:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git commit -a -m <span class="s2">&quot;Description of my changes&quot;</span>
 <span class="o">!</span> git pull
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The procedure for giving your changes to everyone else depends on the other version control system. The new directory contains the files with your changes. Run whatever commands of the other version control system are needed to upload them to the central repository.</p>
<p>Subversion, perhaps the best centralized version control system, is used by countless projects. The <em>git svn</em> command automates the above for Subversion repositories, and can also be used to <a href="http://google-opensource.blogspot.com/2008/05/export-git-project-to-google-code.html[export">http://google-opensource.blogspot.com/2008/05/export-git-project-to-google-code.html[export</a> a Git project to a Subversion repository].</p>
<h3 id="Mercurial">Mercurial<a class="anchor-link" href="#Mercurial"> </a></h3><p>Mercurial is a similar version control system that can almost seamlessly work in tandem with Git. With the <code>hg-git</code> plugin, a Mercurial user can losslessly push to and pull from a Git repository.</p>
<p>Obtain the <code>hg-git</code> plugin with Git:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git clone git://github.com/schacon/hg-git.git
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>or Mercurial:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> hg clone http://bitbucket.org/durin42/hg-git/
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Sadly, I am unaware of an analogous plugin for Git. For this reason, I advocate Git over Mercurial for the main repository, even if you prefer Mercurial. With a Mercurial project, usually a volunteer maintains a parallel Git repository to accommodate Git users, whereas thanks to the <code>hg-git</code> plugin, a Git project automatically accommodates Mercurial users.</p>
<p>Although the plugin can convert a Mercurial repository to a Git repository by pushing to an empty repository, this job is easier with the <code>hg-fast-export.sh</code> script, available from:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git clone git://repo.or.cz/fast-export.git
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To convert, in an empty directory:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="o">!</span> git init
 <span class="o">!</span> hg-fast-export.sh -r /hg/repo
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>after adding the script to your <code>$PATH</code>.</p>
<h3 id="Bazaar">Bazaar<a class="anchor-link" href="#Bazaar"> </a></h3><p>We briefly mention Bazaar because it is the most popular free distributed
version control system after Git and Mercurial.</p>
<p>Bazaar has the advantage of hindsight, as it is relatively young; its designers could learn from mistakes of the past, and sidestep minor historical warts. Additionally, its developers are mindful of portability and interoperation with other version control systems.</p>
<p>A <code>bzr-git</code> plugin lets Bazaar users work with Git repositories to some extent. The <code>tailor</code> program converts Bazaar repositories to Git repositories, and can do so incrementally, while <code>bzr-fast-export</code> is well-suited for one-shot conversions.</p>
<h3 id="Why-I-use-Git">Why I use Git<a class="anchor-link" href="#Why-I-use-Git"> </a></h3><p>I originally chose Git because I heard it could manage the unimaginably unmanageable Linux kernel source. I've never felt a need to switch. Git has served admirably, and I've yet to be bitten by its flaws. As I primarily use Linux, issues on other platforms are of no concern.</p>
<p>Also, I prefer C programs and bash scripts to executables such as Python scripts: there are fewer dependencies, and I'm addicted to fast running times.</p>
<p>I did think about how Git could be improved, going so far as to write my own Git-like tool, but only as an academic exercise. Had I completed my project, I would have stayed with Git anyway, as the gains are too slight to justify using an oddball system.</p>
<p>Naturally, your needs and wants likely differ, and you may be better off with another system. Nonetheless, you can't go far wrong with Git.</p>

</div>
</div>
</div>
</div>
 

